working_dir_path: output      # Folder to write i/o files of the workflow steps
can_write_console_log: False  # Verbose writing of log information
restart: False                # Skip steps already performed
remove_tmp: True

# Configuration of the Supervised MD algorithm

sumd:
  colvar:                      # Collective variable definition: distance between COM of group1 and COM of group2
    group1_selection: 'resname MOL'     # Group 1 selection, see Atom Selection Language in MDTraj
    group2_selection: 'resid 10 to 11 or resid 23 to 24'   # Group 2 selection
    target: 0.5                  # Target value of colvar in nm
    threshold: 0.5               # Go to unsupervised MD once within threshold of target
  num_steps:
    max_total: 100              # Maximum number of total steps
    max_failed: 20              # Maximum number of tries for same initial conditions
  slope_threshold: 0.1          # Slope threshold in absolute value in nm/ns

# Configuration of short MD simulation

short_MD:
  paths:
    input_gro_path: lastAcceptedStep.gro
    input_top_zip_path: topology.zip
    input_cpt_path: lastAcceptedStep.cpt
    output_tpr_path: step.tpr
    output_trr_path: step.trr
    output_gro_path: step.gro
    output_edr_path: step.edr
    output_log_path: step.log
    output_xtc_path: step.xtc
    output_cpt_path: step.cpt
  properties:
    simulation_type: free
    remove_tmp: True
    binary_path: /eb/x86_64/software/GROMACS/2022.3-intel-2021b-CUDA-11.6.0/bin/gmx
    use_gpu: True
    mdp:
      integrator: md           # integrator algorithm
      dt: 0.002                # time step (ps)
      nsteps: 250000           # total number of time steps
      ref-t: 300 300           # reference temperature for coupling
      nstxout: 0               # freq. of .trr trajectory (coordinates) writing in time steps
      nstxout-compressed: 10000  # freq. of .xtc trajectory (coordinates) writing in time steps (the one used to compute the CV)
      nstvout: 0               # freq. of .trr trajectory (velocities) writing in time steps
      nstfout: 0               # freq. of .trr trajectory (forces) writing in time steps
      continuation: 'no'
      gen-vel: 'yes'           # generate new velocities
      gen-temp: 300            # temperature for new velocities
      pbc: 'xyz'                 # Periodic boundary conditions
      constraint-algorithm: 'lincs'    # holonomic constraints
      constraints: 'h-bonds'           # h-bonds constrained
      lincs-iter: 1                  # accuracy of LINCS
      lincs-order: 4                 # also related to accuracy
      cutoff-scheme: 'Verlet'
      nstlist: 10        
      rlist: 1.4                 # short-range neighborlist cutoff (in nm)
      rcoulomb: 1.4              # short-range electrostatic cutoff (in nm)
      rvdw: 1.4                  # short-range van der Waals cutoff (in nm)
      coulombtype: 'PME'           # Particle Mesh Ewald for long-range electrostatics
      pme-order: 4               # cubic interpolation
      fourierspacing: 0.16       # grid spacing for FFT
      tcoupl: 'V-rescale'          # modified Berendsen thermostat
      tc-grps: 'non-Water_&_!Ion Water_and_ions'   # two coupling groups - more accurate
      tau-t: 0.1 0.1             # time constant, in ps
      pcoupl: 'Parrinello-Rahman'  # pressure coupling is on for NPT
      pcoupltype: 'isotropic'      # uniform scaling of box vectors
      tau-p: 2.0                 # time constant, in ps
      ref-p: 1.0                 # reference pressure, in bar
      compressibility: 4.5e-5    # isothermal compressibility of water, bar^-1
      refcoord-scaling: 'com'
      DispCorr: 'EnerPres'         # account for cut-off vdW scheme

# Configuration of trajectory concatenation

trajectory_cat:
  paths:
    input_trj_zip_path: trajectory_bundle.zip
    output_trj_path: trajectory.xtc
  properties: 
    concatenate: True
    remove_tmp: True
